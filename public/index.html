<html>
<head>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
<form id="qrForm">
  <label>
    Name:<br>
    <input type="text" name="name" required />
  </label><br>
  
  <label>
    URL:<br>
    <input type="url" name="target_url" required />
  </label><br>
  <lbael>
    DPI:<br>
    <select name="dpi" required>
      <option value="72">Digital</option>
      <option value="300">Print</option>
    </select>
  </lbael><br/>
  
  <button type="submit">Create</button>
</form>

<div id="message"></div>

  <script>
  // Initialize Supabase client
  const supabaseUrl = 'https://YOUR_SUPABASE_URL.supabase.co';
  const supabaseAnonKey = 'YOUR_SUPABASE_ANON_KEY';

  const supabase = supabase.createClient(supabaseUrl, supabaseAnonKey);

  // Handle form submission
  const form = document.getElementById('qrForm');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const name = form.name.value;
    const target_url = form.target_url.value;
    const dpi = form.dpi.value;

    const { data, error } = await supabase
      .from('qr_codes')  // or whatever your table is called
      .insert([{ name, target_url, dpi }]);

    if (error) {
      alert('Error creating QR code: ' + error.message);
    } else {
      alert('QR code created successfully!');
      form.reset();
    }
  });
</script>

  <script>
document.getElementById("qr-form").addEventListener("submit", async function(e) {
  e.preventDefault();

  const name = document.getElementById("qr-name").value;
  const target_url = document.getElementById("qr-link").value;

  const response = await fetch("/api/create", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify({ name, target_url })
  });

  const result = await response.json();

  if (response.ok) {
    alert("QR Code saved to database!");
    // Optional: Redirect or clear form
  } else {
    alert("Error: " + result.error);
  }
});
</script>

</body>
</html>
